(function(n,l){typeof exports=="object"&&typeof module!="undefined"?l(exports,require("axios"),require("qs")):typeof define=="function"&&define.amd?define(["exports","axios","qs"],l):l((n=typeof globalThis!="undefined"?globalThis:n||self).easyapi={},n.axios,n.Qs)})(this,function(n,l,p){"use strict";var T=(n,l,p)=>new Promise((c,h)=>{var y=u=>{try{g(p.next(u))}catch(f){h(f)}},b=u=>{try{g(p.throw(u))}catch(f){h(f)}},g=u=>u.done?c(u.value):Promise.resolve(u.value).then(y,b);g((p=p.apply(n,l)).next())});const c={timeout:3e4,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},responseFormat:function(e,s=!1){return!e||e.status!==200&&e.status!==304?e:s?e.data:(t=e.config,["blob","arraybuffer","stream"].includes(t.responseType)?e:e.data);var t}};function h(m,a){return T(this,arguments,function*({url:e,data:s,options:t={}},{instance:o}){var r,d;return o({timeout:(r=t.timeout)!=null?r:o.defaults.timeout,method:"get",url:e,params:s,headers:(d=t.headers)!=null?d:o.defaults.headers,signal:t.signal,responseType:t.responseType||"json"}).then(i=>c.responseFormat(i,!0))})}function y(m,a){return T(this,arguments,function*({url:e,data:s,options:t={}},{instance:o}){var r,d;return s&&/urlencoded/.test(t.headers["Content-Type"])&&(s=p.stringify(s)),o({timeout:(r=t.timeout)!=null?r:o.defaults.timeout,method:"post",url:e,data:s,headers:(d=t.headers)!=null?d:o.defaults.headers,signal:t.signal,responseType:t.responseType||"json"}).then(i=>c.responseFormat(i,!0))})}function b(m,a){return T(this,arguments,function*({url:e,data:s,options:t={}},{instance:o}){var r,d;return o({timeout:(r=t.timeout)!=null?r:o.defaults.timeout,method:"post",url:e,data:s,headers:Object.assign({},(d=t.headers)!=null?d:{},{"Content-Type":"multipart/form-data"}),onUploadProgress:function(i){typeof t.onUploadProgress=="function"&&t.onUploadProgress(i)},onDownloadProgress:function(i){typeof t.onUploadProgress=="function"&&t.onUploadProgress(i)},signal:t.signal}).then(i=>c.responseFormat(i))})}n.instance=null;const g={get:h,post:y,upload:b};function u(e){const s=[];n.instance=n.instance||f();const t=(o,m)=>{if(m){const{url:r=e.url,method:d=e.method,options:i=e.options}=m;Object.assign(e.options,i),Object.assign(e,{url:r,method:d},{data:o})}else Object.assign(e,{data:o});const a=new AbortController;return e.options.signal=a.signal,s.push(()=>a.abort()),g[`${e.method}`.toLowerCase()]({url:e.url,data:e.data,options:e.options},{instance:n.instance})};return t.cancel=o=>s.forEach((m,a)=>{(typeof o!="number"||isNaN(o)||o===a)&&m()}),t}function f(e=c){return n.instance||(n.instance=l.create(e))}n.createApis=function(e={},{baseUrl:s=""}={}){var o;const t={};for(let[m,a]of Object.entries(e)){a=a||{};const r={url:/^http/.test(a.url)||/^ws/.test(a.url)?a.url:s+a.url,method:a.method,options:Object.assign({headers:c.headers,timeout:c.timeout},(o=a.options)!=null?o:{})};t[m]=u(r)}return t},n.createInstance=f,n.createRequest=u,n.defineConfig=function(e){Object.assign(c,e)},n.get=h,n.post=y,n.upload=b,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
