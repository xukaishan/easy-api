(function(w,F){typeof exports=="object"&&typeof module!="undefined"?F(exports,require("axios"),require("qs")):typeof define=="function"&&define.amd?define(["exports","axios","qs"],F):F((w=typeof globalThis!="undefined"?globalThis:w||self).easyapi={},w.axios,w.Qs)})(this,function(w,F,rt){"use strict";function O(){O=function(){return n};var n={},s=Object.prototype,u=s.hasOwnProperty,c=Object.defineProperty||function(r,t,e){r[t]=e.value},a=typeof Symbol=="function"?Symbol:{},p=a.iterator||"@@iterator",v=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function i(r,t,e){return Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{i({},"")}catch(r){i=function(t,e,l){return t[e]=l}}function f(r,t,e,l){var o=t&&t.prototype instanceof g?t:g,y=Object.create(o.prototype),b=new q(l||[]);return c(y,"_invoke",{value:ot(r,e,b)}),y}function m(r,t,e){try{return{type:"normal",arg:r.call(t,e)}}catch(l){return{type:"throw",arg:l}}}n.wrap=f;var h={};function g(){}function E(){}function L(){}var P={};i(P,p,function(){return this});var A=Object.getPrototypeOf,U=A&&A(A(M([])));U&&U!==s&&u.call(U,p)&&(P=U);var S=L.prototype=g.prototype=Object.create(P);function X(r){["next","throw","return"].forEach(function(t){i(r,t,function(e){return this._invoke(t,e)})})}function C(r,t){function e(o,y,b,x){var j=m(r[o],r,y);if(j.type!=="throw"){var k=j.arg,N=k.value;return N&&typeof N=="object"&&u.call(N,"__await")?t.resolve(N.__await).then(function(_){e("next",_,b,x)},function(_){e("throw",_,b,x)}):t.resolve(N).then(function(_){k.value=_,b(k)},function(_){return e("throw",_,b,x)})}x(j.arg)}var l;c(this,"_invoke",{value:function(o,y){function b(){return new t(function(x,j){e(o,y,x,j)})}return l=l?l.then(b,b):b()}})}function ot(r,t,e){var l="suspendedStart";return function(o,y){if(l==="executing")throw new Error("Generator is already running");if(l==="completed"){if(o==="throw")throw y;return tt()}for(e.method=o,e.arg=y;;){var b=e.delegate;if(b){var x=Z(b,e);if(x){if(x===h)continue;return x}}if(e.method==="next")e.sent=e._sent=e.arg;else if(e.method==="throw"){if(l==="suspendedStart")throw l="completed",e.arg;e.dispatchException(e.arg)}else e.method==="return"&&e.abrupt("return",e.arg);l="executing";var j=m(r,t,e);if(j.type==="normal"){if(l=e.done?"completed":"suspendedYield",j.arg===h)continue;return{value:j.arg,done:e.done}}j.type==="throw"&&(l="completed",e.method="throw",e.arg=j.arg)}}}function Z(r,t){var e=t.method,l=r.iterator[e];if(l===void 0)return t.delegate=null,e==="throw"&&r.iterator.return&&(t.method="return",t.arg=void 0,Z(r,t),t.method==="throw")||e!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+e+"' method")),h;var o=m(l,r.iterator,t.arg);if(o.type==="throw")return t.method="throw",t.arg=o.arg,t.delegate=null,h;var y=o.arg;return y?y.done?(t[r.resultName]=y.value,t.next=r.nextLoc,t.method!=="return"&&(t.method="next",t.arg=void 0),t.delegate=null,h):y:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function at(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function I(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function q(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(at,this),this.reset(!0)}function M(r){if(r){var t=r[p];if(t)return t.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var e=-1,l=function o(){for(;++e<r.length;)if(u.call(r,e))return o.value=r[e],o.done=!1,o;return o.value=void 0,o.done=!0,o};return l.next=l}}return{next:tt}}function tt(){return{value:void 0,done:!0}}return E.prototype=L,c(S,"constructor",{value:L,configurable:!0}),c(L,"constructor",{value:E,configurable:!0}),E.displayName=i(L,d,"GeneratorFunction"),n.isGeneratorFunction=function(r){var t=typeof r=="function"&&r.constructor;return!!t&&(t===E||(t.displayName||t.name)==="GeneratorFunction")},n.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,L):(r.__proto__=L,i(r,d,"GeneratorFunction")),r.prototype=Object.create(S),r},n.awrap=function(r){return{__await:r}},X(C.prototype),i(C.prototype,v,function(){return this}),n.AsyncIterator=C,n.async=function(r,t,e,l,o){o===void 0&&(o=Promise);var y=new C(f(r,t,e,l),o);return n.isGeneratorFunction(t)?y:y.next().then(function(b){return b.done?b.value:y.next()})},X(S),i(S,d,"Generator"),i(S,p,function(){return this}),i(S,"toString",function(){return"[object Generator]"}),n.keys=function(r){var t=Object(r),e=[];for(var l in t)e.push(l);return e.reverse(),function o(){for(;e.length;){var y=e.pop();if(y in t)return o.value=y,o.done=!1,o}return o.done=!0,o}},n.values=M,q.prototype={constructor:q,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!r)for(var t in this)t.charAt(0)==="t"&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var r=this.tryEntries[0].completion;if(r.type==="throw")throw r.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function e(j,k){return y.type="throw",y.arg=r,t.next=j,k&&(t.method="next",t.arg=void 0),!!k}for(var l=this.tryEntries.length-1;l>=0;--l){var o=this.tryEntries[l],y=o.completion;if(o.tryLoc==="root")return e("end");if(o.tryLoc<=this.prev){var b=u.call(o,"catchLoc"),x=u.call(o,"finallyLoc");if(b&&x){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(b){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!x)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(r,t){for(var e=this.tryEntries.length-1;e>=0;--e){var l=this.tryEntries[e];if(l.tryLoc<=this.prev&&u.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var o=l;break}}o&&(r==="break"||r==="continue")&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var y=o?o.completion:{};return y.type=r,y.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(y)},complete:function(r,t){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&t&&(this.next=t),h},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===r)return this.complete(e.completion,e.afterLoc),I(e),h}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===r){var l=e.completion;if(l.type==="throw"){var o=l.arg;I(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,e){return this.delegate={iterator:M(r),resultName:t,nextLoc:e},this.method==="next"&&(this.arg=void 0),h}},n}function Y(n,s,u,c,a,p,v){try{var d=n[p](v),i=d.value}catch(f){return void u(f)}d.done?s(i):Promise.resolve(i).then(c,a)}function G(n){return function(){var s=this,u=arguments;return new Promise(function(c,a){var p=n.apply(s,u);function v(i){Y(p,c,a,v,d,"next",i)}function d(i){Y(p,c,a,v,d,"throw",i)}v(void 0)})}}function et(n,s){return function(u){if(Array.isArray(u))return u}(n)||function(u,c){var a=u==null?null:typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(a!=null){var p,v,d,i,f=[],m=!0,h=!1;try{if(d=(a=a.call(u)).next,c===0){if(Object(a)!==a)return;m=!1}else for(;!(m=(p=d.call(a)).done)&&(f.push(p.value),f.length!==c);m=!0);}catch(g){h=!0,v=g}finally{try{if(!m&&a.return!=null&&(i=a.return(),Object(i)!==i))return}finally{if(h)throw v}}return f}}(n,s)||function(u,c){if(u){if(typeof u=="string")return D(u,c);var a=Object.prototype.toString.call(u).slice(8,-1);if(a==="Object"&&u.constructor&&(a=u.constructor.name),a==="Map"||a==="Set")return Array.from(u);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D(u,c)}}(n,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function D(n,s){(s==null||s>n.length)&&(s=n.length);for(var u=0,c=new Array(s);u<s;u++)c[u]=n[u];return c}var T={timeout:3e4,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},responseFormat:function(n){var s,u=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!n||n.status!==200&&n.status!==304?n:u?n.data:(s=n.config,["blob","arraybuffer","stream"].includes(s.responseType)?n:n.data)}};function Q(n,s){return R.apply(this,arguments)}function R(){return(R=G(O().mark(function n(s,u){var c,a,p,v,d,i,f,m;return O().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return p=s.url,v=s.data,d=s.options,i=d===void 0?{}:d,f=u.instance,m={timeout:(c=i.timeout)!==null&&c!==void 0?c:f.defaults.timeout,method:"get",url:p,params:v,headers:(a=i.headers)!==null&&a!==void 0?a:f.defaults.headers,signal:i.signal,responseType:i.responseType||"json"},h.abrupt("return",f(m).then(function(g){return T.responseFormat(g,!0)}));case 4:case"end":return h.stop()}},n)}))).apply(this,arguments)}function $(n,s){return z.apply(this,arguments)}function z(){return(z=G(O().mark(function n(s,u){var c,a,p,v,d,i,f,m;return O().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return p=s.url,v=s.data,d=s.options,i=d===void 0?{}:d,f=u.instance,v&&/urlencoded/.test(i.headers["Content-Type"])&&(v=rt.stringify(v)),m={timeout:(c=i.timeout)!==null&&c!==void 0?c:f.defaults.timeout,method:"post",url:p,data:v,headers:(a=i.headers)!==null&&a!==void 0?a:f.defaults.headers,signal:i.signal,responseType:i.responseType||"json"},h.abrupt("return",f(m).then(function(g){return T.responseFormat(g,!0)}));case 5:case"end":return h.stop()}},n)}))).apply(this,arguments)}function B(n,s){return H.apply(this,arguments)}function H(){return(H=G(O().mark(function n(s,u){var c,a,p,v,d,i,f,m;return O().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return p=s.url,v=s.data,d=s.options,i=d===void 0?{}:d,f=u.instance,m={timeout:(c=i.timeout)!==null&&c!==void 0?c:f.defaults.timeout,method:"post",url:p,data:v,headers:Object.assign({},(a=i.headers)!==null&&a!==void 0?a:{},{"Content-Type":"multipart/form-data"}),onUploadProgress:function(g){typeof i.onUploadProgress=="function"&&i.onUploadProgress(g)},onDownloadProgress:function(g){typeof i.onUploadProgress=="function"&&i.onUploadProgress(g)},signal:i.signal},h.abrupt("return",f(m).then(function(g){return T.responseFormat(g)}));case 4:case"end":return h.stop()}},n)}))).apply(this,arguments)}function J(n,s){return K.apply(this,arguments)}function K(){return(K=G(O().mark(function n(s,u){var c,a,p,v,d,i,f,m,h,g,E,L;return O().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return p=s.url,v=s.method,d=s.params,i=d===void 0?null:d,f=s.data,m=f===void 0?null:f,h=s.options,g=h===void 0?{}:h,E=u.instance,L={timeout:(c=g.timeout)!==null&&c!==void 0?c:E.defaults.timeout,method:v,url:p,params:i,data:m,headers:(a=g.headers)!==null&&a!==void 0?a:E.defaults.headers,signal:g.signal,responseType:g.responseType||"json"},P.abrupt("return",E(L).then(function(A){return T.responseFormat(A,!0)}));case 4:case"end":return P.stop()}},n)}))).apply(this,arguments)}w.instance=null;var nt={get:Q,post:$,upload:B};function V(n){var s=[];w.instance=w.instance||W();var u=function(c,a){var p;if(a){var v=a.url,d=v===void 0?n.url:v,i=a.method,f=i===void 0?n.method:i,m=a.options,h=m===void 0?n.options:m;Object.assign(n.options,h),Object.assign(n,{url:d,method:f},{data:c})}else Object.assign(n,{data:c});var g=new AbortController;return n.options.signal=g.signal,s.push(function(){return g.abort()}),((p=nt["".concat(n.method).toLowerCase()])!==null&&p!==void 0?p:J)({url:n.url,data:n.data,options:n.options},{instance:w.instance})};return u.cancel=function(c){return s.forEach(function(a,p){(typeof c!="number"||isNaN(c)||c===p)&&a()})},u}function W(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T;return w.instance||(w.instance=F.create(n))}w.commonFetch=J,w.createApis=function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).baseUrl,u=s===void 0?"":s,c={},a=0,p=Object.entries(n);a<p.length;a++){var v,d=et(p[a],2),i=d[0],f=d[1],m={url:/^http/.test((f=f||{}).url)||/^ws/.test(f.url)?f.url:u+f.url,method:f.method,options:Object.assign({headers:T.headers,timeout:T.timeout},(v=f.options)!==null&&v!==void 0?v:{})};c[i]=V(m)}return c},w.createInstance=W,w.createRequest=V,w.defineConfig=function(n){Object.assign(T,n)},w.get=Q,w.post=$,w.upload=B,Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});
